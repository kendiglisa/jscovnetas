<!DOCTYPE html>
<html>
<head>
    <meta name="robots" content="noindex, nofollow">
    <title>TXT File Archive</title>
</head>
<body>
    <pre id="files">Scanning repository for TXT files...</pre>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // CONFIGURATION
            const config = {
                repo: 'kendiglisa/adfasdfasfs',  // Format: username/repository
                branch: 'main'                   // Branch name (main, master, etc.)
            };
            
            const container = document.getElementById('files');
            
            // Recursive function to get all files in repo
            function getAllFiles(url) {
                return fetch(url)
                    .then(response => {
                        if (!response.ok) {
                            // Fallback to CORS proxy if needed
                            return fetch(`https://corsproxy.io/?${encodeURIComponent(url)}`);
                        }
                        return response;
                    })
                    .then(response => {
                        if (!response.ok) throw new Error(`GitHub API error: ${response.status}`);
                        return response.json();
                    })
                    .then(items => {
                        const files = items.filter(item => item.type === 'file' && item.name.endsWith('.txt'));
                        const folders = items.filter(item => item.type === 'dir');
                        
                        return Promise.all([
                            Promise.resolve(files),
                            ...folders.map(folder => getAllFiles(folder.url))
                        ]).then(results => {
                            const allFiles = [];
                            results.forEach(result => {
                                if (Array.isArray(result)) {
                                    allFiles.push(...result);
                                }
                            });
                            return allFiles;
                        });
                    });
            }
            
            // Get all files recursively
            getAllFiles(`https://api.github.com/repos/${config.repo}/git/trees/${config.branch}?recursive=1`)
                .then(files => {
                    if (files.length === 0) {
                        throw new Error('No TXT files found in repository');
                    }
                    
                    // Sort by filename (alphabetical)
                    return files.sort((a, b) => a.path.localeCompare(b.path));
                })
                .then(sortedFiles => {
                    container.textContent = `Loading ${sortedFiles.length} TXT files...`;
                    
                    // Load all TXT files
                    return Promise.all(
                        sortedFiles.map(file => 
                            fetch(`https://raw.githubusercontent.com/${config.repo}/${config.branch}/${file.path}`)
                                .then(res => res.text())
                                .then(content => ({
                                    filename: file.path,
                                    content
                                }))
                                .catch(e => ({
                                    filename: file.path,
                                    error: e.message
                                }))
                        )
                    );
                })
                .then(results => {
                    let output = '';
                    
                    results.forEach(result => {
                        output += `=== ${result.filename} ===\n\n`;
                        
                        if (result.error) {
                            output += `[ERROR: ${result.error}]\n`;
                        } else {
                            output += result.content + '\n';
                        }
                        
                        output += '\n\n';
                    });
                    
                    container.textContent = output;
                })
                .catch(error => {
                    container.textContent = `ERROR: ${error.message}\n\nVerify that:
- Your repository is public
- TXT files exist in the repository
- Files have .txt extension

Try accessing a file directly:
https://raw.githubusercontent.com/${config.repo}/${config.branch}/example.txt`;
                });
        });
    </script>
</body>
</html>
